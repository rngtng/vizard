!!!
%html{lang:"en"}
  %head
    %meta{charset:'utf-8'}
    %meta{'http-equiv' => "X-UA-Compatible", :content => "chrome=1"}
    %meta{name:"viewport", content:"width=device-width, initial-scale=1, maximum-scale=1"}

    /[if lt IE 9]
      %script{src:"//html5shiv.googlecode.com/svn/trunk/html5.js"}

    %link{rel:"stylesheet", type:"text/css", href:"css/style.css", media:"screen"}

    %title UML Generator

  %body
    %header
      .inner
        %h1 UML Generator
        %h2 - turn text into UML sequence diagrams

      %a{href:"https://github.com/soundcloud/uml-generator"}
        %img.gh-forkme{src:"//s3.amazonaws.com/github/ribbons/forkme_right_white_ffffff.png", alt:"Fork me on GitHub"}

    #main
      %section#demo
        %table{align:"center", width:"100%"}
          %tr
            %td{width:"450px", valign:'top'}
              .editor-wrapper
                .editor
                  :preserve
                    Andrew->China: Says Hello
                    Note right of China: China thinks\nabout it
                    China-->Andrew: How are you?
                    Andrew->>China: I am good thanks!

              %ul
                %li
                  %a Download as SVG
                %li
                  %a Download as Text

            %td.diagram{align:'left', valign:'top'}
              %img{src:"#"}

    %footer
      %hr
        .inner
          a SoundCloud 20% Project by Tobi -
          %a{href:"https://github.com/rngtng/uml-generator"} get it from github

    %script{src:"http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"}
    %script{src:"http://raw.github.com/ajaxorg/ace-builds/master/src-min-noconflict/ace.js", charset:"utf-8"}
    %script{src:"http://underscorejs.org/underscore-min.js"}

    :javascript
      function setup_editor(div) {
        var editor_div = div.find(".editor"),
        diagram_div = div.find(".diagram img"),
        on_change = function() {
          $.post('/render.png', {c:editor.getValue(), base64:true}, function(data) {
            diagram_div.attr('src', 'data:image/png;base64,' + data);
          });
        },
        editor = ace.edit(editor_div.get(0));

        editor.setFontSize(10);
        editor.setTheme("ace/theme/crimson_editor");
        // editor.getSession().setMode("ace/mode/asciidoc");
        editor.getSession().on('change', on_change);

        on_change();
      }

      $(document).ready(function() {
       setup_editor($('#demo'));
      });
